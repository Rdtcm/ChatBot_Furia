{% extends 'global/base.html' %}
{% load static %}

{% block title %}Chat - FURIA Chatbot{% endblock %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'global/css/chat.css' %}">
{% endblock %}

{% block content %}
    <div class="chat-container">
        <aside class="sidebar">
            <h2>Conversas Anteriores</h2>
            <ul id="previous-chats">
                {% if previous_chats %}
                    {% for chat in previous_chats %}
                        <li data-chat-id="{{ chat.id }}">
                            {% if chat.title %}
                                {{ chat.title }}
                            {% else %}
                                Conversa com {{ chat.other_user.username }}
                            {% endif %}
                        </li>
                    {% endfor %}
                {% else %}
                    <li>Nenhuma conversa anterior.</li>
                {% endif %}
            </ul>
        </aside>

        <main class="chat-area">
            <div id="chat-messages">
                <p class="loading-message">Carregando mensagens...</p>
            </div>
            <div class="input-area">
                <input type="text" id="message-input" placeholder="Digite sua mensagem...">
                <button id="send-button">Enviar</button>
            </div>
        </main>
    </div>
{% endblock %}

{% block extra_scripts %}
    <script src="{% static 'global/js/chat.js' %}?v={{ timestamp }}"></script>
{% endblock %}